# 前端功能说明

## 📱 界面概览

A股智能分析系统前端采用现代化设计，提供直观、优雅的用户体验。

### 主要特性

- ✨ **现代化设计**: 采用 Tailwind CSS 构建的精美界面
- 🎨 **深色模式**: 自动适配系统主题，保护视力
- 📱 **响应式布局**: 完美支持桌面和移动设备
- ⚡ **实时反馈**: SSE 流式推送，毫秒级进度更新
- 🎭 **流畅动画**: Framer Motion 提供丝滑过渡效果

## 🎯 功能模块

### 1. 个股分析模块

#### 输入区域
- **股票代码输入框**
  - 支持A股所有股票代码（6位数字）
  - 实时验证输入格式
  - 回车键快速提交
  - 示例：002015（深康佳）、600519（贵州茅台）

- **分析按钮**
  - 渐变蓝色设计，醒目易点击
  - 分析中自动禁用，防止重复提交
  - 动态图标：搜索图标 ⟷ 加载动画

#### 实时进度显示

**四个代理卡片**，实时展示每个代理的工作状态：

1. **主分析师** - 总协调者
   - 待机：灰色边框 + 时钟图标
   - 工作中：蓝色边框 + 旋转加载图标
   - 完成：绿色边框 + 对勾图标

2. **技术分析师** - 价格走势分析
   - 分析历史价格数据
   - 计算技术指标（MA5/10/20）
   - 识别支撑压力位

3. **基本面分析师** - 财务评估
   - 分析资金流向
   - 评估股东结构
   - 检查商誉风险
   - 同行规模对比

4. **情绪分析师** - 市场情绪
   - 机构参与度分析
   - 综合评分（千股千评）
   - 用户关注度统计
   - 市场参与意愿

**进度消息流**
- 时间戳显示（HH:MM:SS）
- 滚动显示最新消息
- 最多显示最近 20 条
- 自动滚动到最新

#### 分析报告展示

- **完整报告**
  - 自动换行，保持格式
  - 代码块样式，便于阅读
  - 支持复制粘贴
  - 响应式宽度适配

- **报告内容结构**
  ```
  一、公司基本情况
  二、技术面分析
  三、基本面分析
  四、市场情绪分析
  五、风险评估
  六、综合投资建议
  ```

### 2. 个股雷达模块（预留）

#### 功能规划

**上涨信号区（红色主题）**
- 🔺 创新高 - 股价创历史新高
- 📈 连续上涨 - N日连续阳线
- 📊 持续放量 - 成交量持续放大
- ⬆️ 向上突破 - 突破关键阻力位
- 📊 量价齐升 - 价涨量增

**下跌信号区（绿色主题）**
- 🔻 创新低 - 股价创历史新低
- 📉 连续下跌 - N日连续阴线
- 📊 持续缩量 - 成交量持续萎缩
- ⬇️ 向下突破 - 跌破关键支撑位
- 📊 量价齐跌 - 价跌量增

#### 信号展示

每个信号卡片包含：
- 信号图标（Lucide Icons）
- 信号名称
- 触发股票数量
- 点击查看详情（预留）

#### 实时更新

- WebSocket 连接（预留）
- 实时推送新信号
- 数量动态更新
- 新信号闪烁提示

## 🎨 设计系统

### 色彩方案

**主色调**
- Primary Blue: `#0ea5e9` - 主要操作按钮
- Success Green: `#10b981` - 成功状态
- Danger Red: `#ef4444` - 警告、下跌

**上涨/下跌配色**
- 上涨：红色系 `#ef4444` （符合中国市场习惯）
- 下跌：绿色系 `#10b981` （符合中国市场习惯）

**中性色**
- Gray 50-900: 文字、边框、背景

### 字体系统

- **标题**: Inter, 20-24px, font-bold
- **正文**: Inter, 14-16px, font-medium
- **辅助文字**: 12-14px, font-normal
- **代码**: Monospace, 14px

### 间距系统

- **组件间距**: 1.5rem (24px)
- **内边距**: 2rem (32px)
- **小间距**: 0.5rem (8px)
- **大间距**: 3rem (48px)

### 圆角设计

- **卡片**: rounded-2xl (16px)
- **按钮**: rounded-xl (12px)
- **小元素**: rounded-lg (8px)

### 阴影效果

- **卡片**: shadow-xl
- **按钮**: shadow-lg hover:shadow-xl
- **浮层**: shadow-2xl

## 🎭 动画效果

### 页面加载动画

```typescript
initial={{ opacity: 0, y: 20 }}
animate={{ opacity: 1, y: 0 }}
transition={{ duration: 0.3 }}
```

### 代理卡片动画

```typescript
// 逐个出现，延迟递增
transition={{ delay: index * 0.1 }}
```

### 进度消息动画

```typescript
// 从左滑入
initial={{ opacity: 0, x: -20 }}
animate={{ opacity: 1, x: 0 }}
```

### 按钮悬停效果

- 渐变色过渡
- 阴影扩大
- 轻微上移

## 📊 状态管理

### React Hooks 使用

- `useState` - 本地状态管理
  - stockCode: 股票代码
  - isAnalyzing: 分析状态
  - progress: 进度事件列表
  - result: 分析结果
  - agents: 代理状态数组

- `useRef` - EventSource 引用
  - 保持 SSE 连接不被重置
  - 组件卸载时自动关闭

- `useEffect` - 生命周期管理
  - 清理 EventSource 连接
  - 防止内存泄漏

### 状态流转

```
初始状态 → 点击分析 → 连接SSE → 接收进度 → 更新UI → 完成 → 展示结果
```

## 🌐 API 集成

### SSE 连接

```typescript
const eventSource = new EventSource(
  `http://localhost:8000/api/analyze?stock_code=${stockCode}`
);
```

### 事件处理

```typescript
eventSource.onmessage = (event) => {
  const data = JSON.parse(event.data);
  switch (data.type) {
    case 'progress': // 更新进度
    case 'complete': // 展示结果
    case 'error':    // 显示错误
  }
};
```

### 错误处理

```typescript
eventSource.onerror = () => {
  setIsAnalyzing(false);
  eventSource.close();
  // 显示友好错误提示
};
```

## 📱 响应式设计

### 断点设置

- `sm`: 640px - 小型设备
- `md`: 768px - 中型设备
- `lg`: 1024px - 大型设备
- `xl`: 1280px - 超大设备

### 布局适配

**桌面端（lg+）**
- 四个代理卡片：4列网格
- 最大宽度：7xl (1280px)

**平板端（md）**
- 四个代理卡片：2列网格
- 内边距调整

**移动端（默认）**
- 四个代理卡片：1列堆叠
- 缩小内边距
- 触摸友好的按钮大小

## 🔧 性能优化

- ✅ 组件懒加载（动态import）
- ✅ 图片懒加载（Next.js Image）
- ✅ CSS按需加载（Tailwind purge）
- ✅ SSE连接复用
- ✅ 防抖节流（输入框）
- ✅ 虚拟滚动（大量数据）

## 🚀 未来扩展

### 计划功能

1. **多股对比**
   - 同时分析多只股票
   - 对比图表展示

2. **历史记录**
   - 保存分析历史
   - 快速重新查看

3. **自定义分析**
   - 选择分析维度
   - 调整分析深度

4. **数据导出**
   - 导出PDF报告
   - 导出Excel数据

5. **个股预警**
   - 设置价格提醒
   - 信号推送通知

6. **个股雷达实现**
   - 后端数据源对接
   - 实时信号推送
   - 信号筛选过滤
   - 自选股监控

## 💡 开发建议

### 新增页面

1. 在 `src/app/` 下创建文件夹
2. 添加 `page.tsx` 文件
3. 使用 `layout.tsx` 继承布局

### 新增组件

1. 在 `src/components/` 下创建 `.tsx` 文件
2. 使用 TypeScript 类型注解
3. 遵循命名规范（PascalCase）

### 样式定制

1. 优先使用 Tailwind 类名
2. 复杂样式写在 `globals.css`
3. 组件专属样式用 CSS Modules

### 状态管理升级

考虑引入：
- Zustand（轻量级）
- Redux Toolkit（复杂场景）
- React Query（数据获取）

---

**持续优化，打造最佳体验！** ✨
